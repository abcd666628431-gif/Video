<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>影片庫統計系統</title>
    <!-- 設定網站縮圖 (Favicon) 為標題 SVG 圖案 -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.741394999999999 28.34337L28.254675 28.34337C29.447565000000004 28.34337 30.414675000000003 27.376275 30.414675000000003 26.183370000000004L30.414675000000003 9.510465C30.414675000000003 8.317544999999999 29.447565000000004 7.350465 28.254675 7.350465L7.74141 7.350465C6.548475 7.350465 5.58141 8.317544999999999 5.58141 9.510465L5.58141 26.183370000000004C5.58141 27.376275 6.548475 28.34337 7.741394999999999 28.34337z' fill='%239796ED'%3E%3C/path%3E%3Cpath d='M8.237805 10.726875C8.237805 11.323335 8.721345 11.806875 9.317805 11.806875L11.308215 11.806875C11.904675 11.806875 12.388215 11.323335 12.388215 10.726875z' fill='%236D69E4'%3E%3C/path%3E%3Cpath d='M16.03455 10.726875C16.03455 11.323335 16.51809 11.806875 17.11455 11.806875L19.104915 11.806875z' fill='%236D69E4'%3E%3C/path%3E%3Cpath d='M23.830995 10.726875C23.830995 11.323335 24.31455 11.806875 24.910995 11.806875L26.901359 11.806875z' fill='%236D69E4'%3E%3C/path%3E%3Cpath d='M8.237805 25.72113C8.237805 26.317725 8.721345 26.80113 9.317805 26.80113L11.308215 26.80113z' fill='%236D69E4'%3E%3C/path%3E%3Cpath d='M16.03455 25.72113C16.03455 26.317725 16.51809 26.80113 17.11455 26.80113L19.104915 26.80113z' fill='%236D69E4'%3E%3C/path%3E%3Cpath d='M23.830995 25.72113C23.830995 26.317725 24.31455 26.80113 24.910995 26.80113L26.901359 26.80113z' fill='%236D69E4'%3E%3C/path%3E%3Cpath d='M5.58141 22.43865L30.414675 22.43865L30.414675 13.25391L5.58141 13.25391z' fill='%236D69E4'%3E%3C/path%3E%3Cpath d='M14.81745 19.422C14.87304 19.2718 14.900835 19.1966 14.928195 19.1615C15.043245 19.0135 15.26703 19.0135 15.38223 19.1615C15.40944 19.1966 15.437235 19.2718 15.49281 19.422C15.802275 20.2584 16.461645 20.9177 17.298 21.2272C17.44833 21.2828 17.52336 21.3106 17.55849 21.3379C17.706525 21.453 17.706525 21.6768 17.55849 21.7918C17.52336 21.8192 17.44833 21.847 17.298 21.9025C16.461645 22.212 15.802275 22.8714 15.49281 23.7077C15.437235 23.8579 15.40944 23.9331 15.38223 23.9682C15.26703 24.1162 15.043245 24.1162 14.928195 23.9682C14.900835 23.9331 14.87304 23.8579 14.81745 23.7077C14.508 22.8714 13.84863 22.212 13.012305 21.9025C12.86205 21.847 12.78693 21.8192 12.751845 21.7918C12.60381 21.6768 12.60381 21.453 12.751845 21.3379C12.78693 21.3106 12.86205 21.2828 13.012305 21.2272C13.84863 20.9177 14.508 20.2584 14.81745 19.422z' fill='%23FDDE80'%3E%3C/path%3E%3Cpath d='M20.13192 10.4962C20.259075 10.1527 20.32257 9.9809 20.384925 9.9007C20.64816 9.5623 21.159795 9.5623 21.42303 9.9007C21.48537 9.9809 21.54888 10.1527 21.676035 10.4962C22.38351 12.4084 23.89119 13.916 25.80336 14.6236C26.14695 14.7506 26.318595 14.8143 26.3988 14.8766C26.73735 15.1399 26.73735 15.6514 26.3988 15.9146C26.318595 15.977 26.14695 16.0406 25.80336 16.1677C23.89119 16.8752 22.38351 18.3829 21.676035 20.2951C21.54888 20.6385 21.48537 20.8103 21.42303 20.8905C21.159795 21.2291 20.64816 21.2291 20.384925 20.8905C20.32257 20.8103 20.259075 20.6385 20.13192 20.2951C19.42431 18.3829 17.916765 16.8752 16.004595 16.1677C15.661005 16.0406 15.48921 15.977 15.409005 15.9146C15.070605 15.6514 15.070605 15.1399 15.409005 14.8766C15.48921 14.8143 15.661005 14.7506 16.004595 14.6236C17.916765 13.916 19.42431 12.4084 20.13192 10.4962z' fill='%23FDDE80'%3E%3C/path%3E%3C/svg%3E" />
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* 兼容繁簡中文的 Noto Sans 字體導入 */
        @import url('https://gs.jurieo.com/gemini/fonts-googleapis/css2?family=Noto+Sans+SC:wght@400;700;900&family=Noto+Sans+TC:wght@400;700;900&display=swap');
        
        body { 
            font-family: 'Noto Sans TC', 'Noto Sans SC', sans-serif; 
            background-color: #3f5968; 
            color: #fff;
            margin: 0;
            overflow-x: hidden;
            font-size: 16px;
            user-select: text;
        }

        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 2px; }
        
        .animate-text-shimmer {
            background: linear-gradient(to right, #ffffff, #ffbae9, #818cf8, #ffffff);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: shimmer 4s linear infinite;
        }
        @keyframes shimmer { to { background-position: 200% center; } }

        .tab-content { width: 100%; margin-top: 1rem; }
        
        .tab-bar { 
            display: flex; flex-wrap: wrap; align-items: center; position: relative; 
            margin-bottom: 1.5rem; gap: 0.75rem; padding: 0.5rem 0.5rem 0.8rem 0.5rem;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .tab { 
            font-weight: 900; color: #3f5968; cursor: pointer; font-size: 0.85rem;
            transition: all 0.3s; text-transform: uppercase; background-color: #ffffff; 
            padding: 6px 18px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            white-space: nowrap; flex-shrink: 0; border: 2px solid transparent;
        }
        .tab:hover { border-color: #ffbae9; }
        .tab.active { background-color: #ffbae9; color: #3f5968; border-color: #ffffff; }

        .tab-action-btn {
            width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;
            background: #ffffff; color: #3f5968; border-radius: 4px; cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: all 0.2s; flex-shrink: 0;
        }
        .tab-action-btn:hover { transform: scale(1.1); z-index: 10; }

        .component-view ul {
            display: grid; grid-template-columns: repeat(1, minmax(0, 1fr)); gap: 1.5rem; padding: 0; list-style: none;
        }
        @media (min-width: 1024px) {
            .component-view ul { grid-template-columns: repeat(2, minmax(500px, 1fr)); }
        }

        .component-view li {
            background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.3s ease; position: relative; border-radius: 10px;
            overflow: hidden; display: flex; height: 240px; 
        }
        .component-view li:hover { background: rgba(0, 0, 0, 0.3); border-color: #ffbae9; transform: translateY(-2px); }
        
        .image-link {
            width: 180px; height: 100%; flex-shrink: 0; display: block; background: #000;
            border-right: 1px solid rgba(255,255,255,0.05); position: relative;
        }
        .image { width: 100%; height: 100%; background-size: cover; background-position: center; }
        
        .desc { flex-grow: 1; display: flex; flex-direction: column; min-width: 0; position: relative; padding: 0.75rem 1.25rem 1rem 1.25rem; }

        .title-container { height: 3.5rem; margin-bottom: 0.3rem; display: flex; align-items: flex-start; padding-right: 50px; }
        .desc .title-link { 
            font-family: 'Noto Sans TC', 'Noto Sans SC', sans-serif; font-size: 1.4rem; font-weight: 900; 
            display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
            color: #fff; text-decoration: none; transition: color 0.2s; cursor: pointer;
            line-height: 1.2; letter-spacing: -0.01em; word-break: break-all;
        }
        .desc .title-link:hover { color: #ffbae9; }

        .update-progress-circle {
            position: absolute; top: 15px; right: 15px; width: 44px; height: 44px;
            background: rgba(0, 0, 0, 0.4); backdrop-filter: blur(4px); border: 2.5px solid #ffbae9;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            z-index: 20; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .update-progress-circle span { font-size: 11px; font-weight: 900; color: #ffbae9; letter-spacing: -0.05em; }

        .id-label {
            background: rgba(254, 249, 195, 0.15); color: #fef9c3; border: 1px solid rgba(254, 249, 195, 0.4);
            padding: 1px 6px; border-radius: 4px; font-family: ui-monospace, monospace;
            font-size: 11px; font-weight: 900; margin-right: 8px; vertical-align: 2px;
        }

        .meta { font-size: 0.85rem; color: #cbd5e1; line-height: 1.6; }
        .meta strong { color: #ffbae9; margin-right: 0.3rem; }

        .progress-container {
            width: 100%; background: rgba(255,255,255,0.1); height: 20px;
            border-radius: 5px; margin-top: auto; margin-bottom: 2px; overflow: hidden; position: relative;
        }
        .progress-fill { height: 100%; background: #ffbae9; transition: width 0.5s ease; }
        .progress-text-overlay {
            mix-blend-mode: difference; position: absolute; inset: 0; display: flex;
            align-items: center; justify-content: center; font-size: 11px; font-weight: 900; color: #fff;
        }

        .status-badge {
            position: absolute; top: 10px; right: 10px; font-size: 11px; padding: 3px 8px;
            border-radius: 4px; font-weight: 900; text-transform: uppercase;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5); z-index: 10; border: 1px solid rgba(255,255,255,0.3);
        }
        .badge-airing { background-color: #16a34a; color: #fff; }
        .badge-completed { background-color: #dc2626; color: #fff; }

        .dashboard-panel {
            background: rgba(0,0,0,0.25); border: 1px solid rgba(255,255,255,0.05);
            border-radius: 4px; padding: 1rem;
        }

        .modal-input-base {
            background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);
            border-bottom: 2px solid #2d3748; padding: 0.5rem 0.75rem; transition: all 0.3s ease;
            color: #fff; border-radius: 4px; min-height: 40px;
        }
        .modal-input-base:focus { border-bottom-color: #ffbae9; background: rgba(0,0,0,0.7); outline: none; }
        
        .btn-delete-bottom {
            position: absolute; bottom: 12px; right: 12px; opacity: 0; transition: all 0.2s;
            background: rgba(239, 68, 68, 0.2); color: #f87171; padding: 4px 10px;
            border-radius: 4px; display: flex; align-items: center; gap: 4px; font-size: 11px;
            font-weight: 900; border: 1px solid rgba(239, 68, 68, 0.3); z-index: 5;
        }
        li:hover .btn-delete-bottom { opacity: 1; }
        .btn-delete-bottom:hover { background: #ef4444; color: #fff; }

        .source-icon-small {
            height: 1.1em; width: auto; max-width: 24px; border-radius: 2px;
            object-fit: contain; display: inline-block; vertical-align: middle; margin-right: 6px;
        }

        .progress-stat { display: flex; align-items: baseline; gap: 2px; }
        .progress-val-current { color: #22d3ee; font-weight: 900; font-size: 1.25rem; line-height: 1; }

        .progress-input-row { display: grid; grid-template-columns: 2fr 1.2fr 2fr 1.2fr; gap: 6px; align-items: center; }
        
        .member-badge {
            display: inline-block; padding: 2px 8px; border-radius: 4px;
            background: rgba(255,255,255,0.1); font-size: 10px; font-weight: 900;
            border: 1px solid rgba(255,255,255,0.15); line-height: 1;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import { initializeApp } from "https://gs.jurieo.com/gemini/gstatic/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://gs.jurieo.com/gemini/gstatic/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, doc, setDoc, addDoc, updateDoc, deleteDoc, onSnapshot, serverTimestamp } from "https://gs.jurieo.com/gemini/gstatic/firebasejs/11.6.1/firebase-firestore.js";

        const { useState, useEffect, useRef, useMemo, memo, useCallback } = React;

        const firebaseConfig = {
            apiKey: "AIzaSyA-bOghSL8apcO6NEda6nc_-_UO6-h9SDs",
            authDomain: "video-b02b3.firebaseapp.com",
            projectId: "video-b02b3",
            storageBucket: "video-b02b3.firebasestorage.app",
            messagingSenderId: "25339039789",
            appId: "1:25339039789:web:6bc5a86b6e2cf39a1f68a4"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'video-library-v1';

        // 智慧百分比計算邏輯 (支援雙單位計算)
        const calculateLevelPercentage = (current, target) => {
            const c1 = parseFloat(current?.v1) || 0;
            const c2 = parseFloat(current?.v2) || 0;
            const t1 = parseFloat(target?.v1) || 0;
            const t2 = parseFloat(target?.v2) || 0;

            if (t1 <= 0) return 0;
            if (c1 < t1) return Math.floor((c1 / t1) * 100);
            if (c1 >= t1 && t2 > 0) return Math.floor((c2 / t2) * 100);
            return 100;
        };

        const formatProgressText = (prog) => {
            if (!prog || typeof prog !== 'object') return prog || "0";
            let parts = [];
            if (prog.v1 && prog.v1 !== "") parts.push(`${prog.v1}${prog.u1 || ''}`);
            if (prog.v2 && prog.v2 !== "") parts.push(`${prog.v2}${prog.u2 || ''}`);
            return parts.join(' ') || "0";
        };

        const formatDate = (ts, dateOnly = false) => { 
            if (!ts) return ""; 
            if (typeof ts === 'string') return ts;
            let date;
            try {
                date = ts?.toDate ? ts.toDate() : new Date(ts.seconds ? ts.seconds * 1000 : ts);
            } catch (e) { return "NOW"; }
            if (!date || isNaN(date.getTime())) return "NOW";
            const Y = date.getFullYear(), M = String(date.getMonth()+1).padStart(2,'0'), D = String(date.getDate()).padStart(2,'0');
            if (dateOnly) return `${Y}-${M}-${D}`;
            return `${Y}-${M}-${D} ${String(date.getHours()).padStart(2,'0')}:${String(date.getMinutes()).padStart(2,'0')}`; 
        };

        const compressImage = (dataUrl, maxWidth = 400) => {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    let w = img.width, h = img.height;
                    if (w > maxWidth) { h = Math.round((h * maxWidth) / w); w = maxWidth; }
                    canvas.width = w; canvas.height = h;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, w, h);
                    resolve(canvas.toDataURL('image/jpeg', 0.8));
                };
                img.src = dataUrl;
            });
        };

        const Icon = memo(({ name, className, onClick, title }) => {
            useEffect(() => { if (window.lucide) window.lucide.createIcons(); }, [name]);
            return (
                <span onClick={(e) => { if(onClick) { e.stopPropagation(); onClick(e); } }} className={`inline-flex items-center justify-center cursor-pointer ${className || ''}`} title={title}>
                    <i data-lucide={name} style={{ width: '100%', height: '100%' }}></i>
                </span>
            );
        });

        const TitleIcon = () => (
            <svg className="w-14 h-14" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.741394999999999 28.34337L28.254675 28.34337C29.447565000000004 28.34337 30.414675000000003 27.376275 30.414675000000003 26.183370000000004L30.414675000000003 9.510465C30.414675000000003 8.317544999999999 29.447565000000004 7.350465 28.254675 7.350465L7.74141 7.350465C6.548475 7.350465 5.58141 8.317544999999999 5.58141 9.510465L5.58141 26.183370000000004C5.58141 27.376275 6.548475 28.34337 7.741394999999999 28.34337z" fill="#9796ED"></path>
                <path d="M8.237805 10.726875C8.237805 11.323335 8.721345 11.806875 9.317805 11.806875L11.308215 11.806875C11.904675 11.806875 12.388215 11.323335 12.388215 10.726875z" fill="#6D69E4"></path>
                <path d="M16.03455 10.726875C16.03455 11.323335 16.51809 11.806875 17.11455 11.806875L19.104915 11.806875z" fill="#6D69E4"></path>
                <path d="M23.830995 10.726875C23.830995 11.323335 24.31455 11.806875 24.910995 11.806875L26.901359 11.806875z" fill="#6D69E4"></path>
                <path d="M8.237805 25.72113C8.237805 26.317725 8.721345 26.80113 9.317805 26.80113L11.308215 26.80113z" fill="#6D69E4"></path>
                <path d="M16.03455 25.72113C16.03455 26.317725 16.51809 26.80113 17.11455 26.80113L19.104915 26.80113z" fill="#6D69E4"></path>
                <path d="M23.830995 25.72113C23.830995 26.317725 24.31455 26.80113 24.910995 26.80113L26.901359 26.80113z" fill="#6D69E4"></path>
                <path d="M5.58141 22.43865L30.414675 22.43865L30.414675 13.25391L5.58141 13.25391z" fill="#6D69E4"></path>
                <path d="M14.81745 19.422C14.87304 19.2718 14.900835 19.1966 14.928195 19.1615C15.043245 19.0135 15.26703 19.0135 15.38223 19.1615C15.40944 19.1966 15.437235 19.2718 15.49281 19.422C15.802275 20.2584 16.461645 20.9177 17.298 21.2272C17.44833 21.2828 17.52336 21.3106 17.55849 21.3379C17.706525 21.453 17.706525 21.6768 17.55849 21.7918C17.52336 21.8192 17.44833 21.847 17.298 21.9025C16.461645 22.212 15.802275 22.8714 15.49281 23.7077C15.437235 23.8579 15.40944 23.9331 15.38223 23.9682C15.26703 24.1162 15.043245 24.1162 14.928195 23.9682C14.900835 23.9331 14.87304 23.8579 14.81745 23.7077C14.508 22.8714 13.84863 22.212 13.012305 21.9025C12.86205 21.847 12.78693 21.8192 12.751845 21.7918C12.60381 21.6768 12.60381 21.453 12.751845 21.3379C12.78693 21.3106 12.86205 21.2828 13.012305 21.2272C13.84863 20.9177 14.508 20.2584 14.81745 19.422z" fill="#FDDE80"></path>
                <path d="M20.13192 10.4962C20.259075 10.1527 20.32257 9.9809 20.384925 9.9007C20.64816 9.5623 21.159795 9.5623 21.42303 9.9007C21.48537 9.9809 21.54888 10.1527 21.676035 10.4962C22.38351 12.4084 23.89119 13.916 25.80336 14.6236C26.14695 14.7506 26.318595 14.8143 26.3988 14.8766C26.73735 15.1399 26.73735 15.6514 26.3988 15.9146C26.318595 15.977 26.14695 16.0406 25.80336 16.1677C23.89119 16.8752 22.38351 18.3829 21.676035 20.2951C21.54888 20.6385 21.48537 20.8103 21.42303 20.8905C21.159795 21.2291 20.64816 21.2291 20.384925 20.8905C20.32257 20.8103 20.259075 20.6385 20.13192 20.2951C19.42431 18.3829 17.916765 16.8752 16.004595 16.1677C15.661005 16.0406 15.48921 15.977 15.409005 15.9146C15.070605 15.6514 15.070605 15.1399 15.409005 14.8766C15.48921 14.8143 15.661005 14.7506 16.004595 14.6236C17.916765 13.916 19.42431 12.4084 20.13192 10.4962z" fill="#FDDE80"></path>
            </svg>
        );

        const GameCard = memo(({ g, onOpenEdit, isEditLocked, onDelete, nameColorMap, allSources }) => {
            const addedByColor = nameColorMap?.[g.addedBy] || '#ffffff';
            const percentage = calculateLevelPercentage(g.watchedProgress, g.totalEpisodes);
            const updatePercentage = calculateLevelPercentage(g.watchedProgress, g.updatedEpisodes);
            const watchingByList = Array.isArray(g.watchingBy) ? g.watchingBy : (g.watchingBy ? [g.watchingBy] : []);
            const sourceInfo = useMemo(() => allSources.find(s => s.name === g.source), [allSources, g.source]);

            const getStatusBadge = () => {
                if (!g.airingStatus) return null;
                const cls = g.airingStatus === "連載中" ? "badge-airing" : "badge-completed";
                return <span className={`status-badge ${cls}`}>{g.airingStatus}</span>;
            };

            return (
                <li className={`group ${!isEditLocked ? 'cursor-pointer' : ''}`} onClick={() => !isEditLocked && onOpenEdit(g)}>
                    <div className="image-link" onClick={e => { if (isEditLocked && g.url) window.open(g.url, '_blank'); }}>
                        {getStatusBadge()}
                        {g.cover ? <div className="image" style={{ backgroundImage: `url(${g.cover})` }}></div> : <div className="w-full h-full flex items-center justify-center bg-black/40 text-white/10"><Icon name="image" className="w-8 h-8" /></div>}
                    </div> 
                    <div className="desc">
                        <div className="update-progress-circle"><span>{updatePercentage}%</span></div>
                        <div className="title-container">
                            <div className="title-link" onClick={(e) => { if (g.url) { e.stopPropagation(); window.open(g.url, '_blank'); } }}>
                                <span className="id-label">#{g.order || 0}</span>{g.name}
                            </div> 
                        </div>
                        <div className="meta space-y-1.5 flex-1 flex flex-col justify-start">
                            <div className="flex items-center flex-wrap gap-x-1 opacity-90">
                                <strong>分類：</strong> {g.category || '未分類'} | 
                                <span className="inline-flex items-center ml-1">
                                    {sourceInfo?.icon && <img src={sourceInfo.icon} className="source-icon-small" />}
                                    <span className="leading-tight">{g.source || '未知來源'}</span>
                                </span>
                            </div>
                            <div className="text-[11px] opacity-90">
                                <strong>更新進度：</strong> 
                                <span className="text-white/95">{formatProgressText(g.updatedEpisodes)} / {formatProgressText(g.totalEpisodes) || '?'}</span>
                                {(g.updateDay || g.updateTime) && <span className="ml-2 text-[#ffbae9] font-black border-l border-white/20 pl-2 uppercase tracking-tighter">每周{g.updateDay ? `(${g.updateDay})` : ''} {g.updateTime}</span>}
                            </div>
                            <div className="mt-auto pt-2">
                                <div className="flex justify-between items-center w-full gap-2 mb-1.5">
                                    <div className="flex items-center gap-1.5"><strong className="text-[11px]">觀看進度：</strong><span className="progress-val-current">{formatProgressText(g.watchedProgress)}</span></div>
                                    <div className="flex flex-wrap justify-end gap-1 flex-1">
                                        {watchingByList.map(name => <span key={name} className="member-badge" style={{ color: nameColorMap[name], borderColor: nameColorMap[name]+'30', backgroundColor: nameColorMap[name]+'10' }}>{name}</span>)}
                                    </div>
                                </div>
                                <div className="progress-container"><div className="progress-fill" style={{ width: `${percentage}%` }}></div><div className="progress-text-overlay">{percentage}%</div></div>
                            </div>
                        </div>
                        {!isEditLocked && <button onClick={(e) => { e.stopPropagation(); onDelete(g); }} className="btn-delete-bottom"><Icon name="trash-2" className="w-3 h-3" /> 移除資料</button>}
                    </div>
                </li>
            );
        });

        function App() {
            const [user, setUser] = useState(null);
            const [games, setGames] = useState([]); 
            const importInputRef = useRef(null);
            const fileInputRef = useRef(null);
            const [notification, setNotification] = useState(null);
            const showNotify = useCallback((msg) => { setNotification(msg); setTimeout(() => setNotification(null), 3000); }, []);
            const [onlineUsers, setOnlineUsers] = useState([]);
            const [activityLogs, setActivityLogs] = useState([]);
            const [isLoadingGames, setIsLoadingGames] = useState(true);
            const [userName, setUserName] = useState(() => localStorage.getItem('steam_user_name') || '用戶_' + Math.floor(Math.random()*1000));
            const [userColor, setUserColor] = useState(() => localStorage.getItem('steam_user_color') || '#ffbae9');
            const [customCategories, setCustomCategories] = useState([]);
            const [customSources, setCustomSources] = useState([]);
            const [activeTab, setActiveTab] = useState(null); 
            const [isAddGroupModalOpen, setIsAddGroupModalOpen] = useState(false);
            const [newGroupName, setNewGroupName] = useState('');
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [editingId, setEditingId] = useState(null); 
            const emptyProgress = { v1: '', u1: '集', v2: '', u2: '章' };
            const [formData, setFormData] = useState({ 
                name: '', addedBy: '', order: '', url: '', cover: null,
                totalEpisodes: { ...emptyProgress }, watchedProgress: { ...emptyProgress }, updatedEpisodes: { ...emptyProgress }, 
                airingStatus: '連載中', source: '', category: '', sourceIcon: '', manualUpdatedAt: '', watchingBy: [], updateDay: '', updateTime: '18:00'
            });
            const [lastSelectedImgZone, setLastSelectedImgZone] = useState('cover');
            const [searchQuery, setSearchQuery] = useState(''); 
            const [isEditLocked, setIsEditLocked] = useState(true);
            const [deleteGameTarget, setDeleteGameTarget] = useState(null);

            const unitSuggestions = useMemo(() => {
                const s = new Set(['集', '話', '章', '季', '卷', '冊', '回']);
                games.forEach(g => { [g.totalEpisodes, g.watchedProgress, g.updatedEpisodes].forEach(p => { if(p?.u1) s.add(p.u1); if(p?.u2) s.add(p.u2); }); });
                return Array.from(s).sort();
            }, [games]);

            const nameColorMap = useMemo(() => {
                const map = {}; onlineUsers.forEach(u => map[u.name] = u.color); map[userName] = userColor;
                games.forEach(g => { if(g.addedBy && !map[g.addedBy]) map[g.addedBy] = '#cbd5e1'; (g.watchingBy||[]).forEach(n => { if(!map[n]) map[n] = '#cbd5e1'; }); });
                return map;
            }, [onlineUsers, userName, userColor, games]);

            const memberStats = useMemo(() => {
                const statsMap = {};
                games.forEach(g => {
                    (g.watchingBy || []).forEach(name => {
                        if (!statsMap[name]) statsMap[name] = { total: 0, watching: 0, completed: 0 };
                        statsMap[name].total++;
                        const p = calculateLevelPercentage(g.watchedProgress, g.totalEpisodes);
                        if (p >= 100) statsMap[name].completed++;
                        else if (p > 0) statsMap[name].watching++;
                    });
                });
                return Object.keys(statsMap).sort().map(name => ({ name, color: nameColorMap[name], stats: statsMap[name] }));
            }, [games, nameColorMap]);

            useEffect(() => {
                signInAnonymously(auth);
                const unsubscribe = onAuthStateChanged(auth, setUser);
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!user) return;
                const getCol = (c) => collection(db, 'artifacts', appId, 'public', 'data', c);
                const unsubGames = onSnapshot(getCol('games'), (snap) => { setGames(snap.docs.map(d => ({ id: d.id, ...d.data() }))); setIsLoadingGames(false); });
                const unsubLogs = onSnapshot(getCol('activity_logs'), (snap) => { setActivityLogs(snap.docs.map(d => ({ id: d.id, ...d.data() })).sort((a,b) => (b.timestamp?.seconds||0)-(a.timestamp?.seconds||0)).slice(0,30)); });
                const unsubSettings = onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'settings', 'config'), (d) => { if(d.exists()){ setCustomCategories(d.data().categories||["最新入庫", "編號排序"]); setCustomSources(d.data().sources||[]); } });
                const unsubPresence = onSnapshot(getCol('presence'), (snap) => { const now = Date.now(); setOnlineUsers(snap.docs.map(d => ({uid: d.id, ...d.data()})).filter(u => u.lastSeen && (now - u.lastSeen.toMillis() < 300000))); });
                const upPresence = () => { if(auth.currentUser) setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'presence', auth.currentUser.uid), { name: userName, color: userColor, lastSeen: serverTimestamp() }, { merge: true }); };
                upPresence(); const interval = setInterval(upPresence, 60000);
                return () => { unsubGames(); unsubLogs(); unsubSettings(); unsubPresence(); clearInterval(interval); };
            }, [user, userName, userColor]);

            const handleSaveGame = async (e) => {
                if (e) e.preventDefault();
                if (!formData.name.trim() || !user) return;
                try {
                    const finalData = { ...formData, updatedAt: serverTimestamp(), addedBy: formData.addedBy || userName };
                    delete finalData.sourceIcon;
                    if (editingId) { await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'games', editingId), finalData); }
                    else { await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'games'), { ...finalData, createdAt: serverTimestamp() }); }
                    setIsModalOpen(false); showNotify("儲存成功");
                } catch (e) { showNotify("儲存失敗"); }
            };

            const ProgressInputField = ({ label, value, onChange, labelClass }) => (
                <div className="mb-4">
                    <label className={`block text-[11px] font-black uppercase mb-1.5 ${labelClass || 'text-white/40'}`}>-{label}-</label>
                    <div className="progress-input-row">
                        <input type="number" className="modal-input-base w-full text-sm" value={value.v1} onChange={e=>onChange({...value, v1: e.target.value})} placeholder="數值1" />
                        <input list="unit-list" className="modal-input-base w-full text-xs" value={value.u1} onChange={e=>onChange({...value, u1: e.target.value})} />
                        <input type="number" className="modal-input-base w-full text-sm" value={value.v2} onChange={e=>onChange({...value, v2: e.target.value})} placeholder="數值2" />
                        <input list="unit-list" className="modal-input-base w-full text-xs" value={value.u2} onChange={e=>onChange({...value, u2: e.target.value})} />
                    </div>
                </div>
            );

            const filteredGames = useMemo(() => {
                let list = [...games];
                const q = searchQuery.toLowerCase().trim();
                if (q) list = list.filter(g => g.name.toLowerCase().includes(q) || (g.category||"").toLowerCase().includes(q));
                if (activeTab === "最新入庫") list.sort((a,b) => (b.createdAt?.seconds||0)-(a.createdAt?.seconds||0));
                else {
                    if (activeTab && activeTab !== "編號排序") list = list.filter(g => g.category === activeTab);
                    list.sort((a,b) => (parseFloat(a.order)||0)-(parseFloat(b.order)||0));
                }
                return list;
            }, [games, searchQuery, activeTab]);

            return (
                <div className="min-h-screen p-4 md:p-8 relative text-white pb-24">
                    {notification && <div className="fixed top-4 left-1/2 -translate-x-1/2 z-[100] bg-[#ffbae9] text-[#3f5968] font-black px-6 py-2 rounded-full border-2 border-white shadow-2xl">{notification}</div>}
                    <datalist id="unit-list">{unitSuggestions.map(u => <option key={u} value={u} />)}</datalist>
                    <div className="max-w-[1800px] mx-auto">
                        <header className="mb-8 flex flex-col md:flex-row items-center justify-between gap-4">
                            <div className="flex items-center gap-6">
                                <TitleIcon />
                                <div>
                                    <div className="flex items-center gap-2 mb-1"><div className="w-2 h-2 bg-[#ffbae9]"></div><span className="text-xs font-black text-white/60 tracking-widest uppercase">Anime Matrix v11.6</span></div>
                                    <h1 className="text-4xl md:text-5xl font-black uppercase tracking-tighter">影片 <span className="animate-text-shimmer">庫統計系統</span></h1>
                                </div>
                            </div>
                            <div className="flex items-center gap-2 px-4 py-2 border rounded text-xs font-black bg-black/20 border-white/20 uppercase">
                                <Icon name="refresh-cw" className="w-4 h-4 mr-2" />即時同步中
                            </div>
                        </header>
                        
                        <div className="grid grid-cols-1 lg:grid-cols-10 gap-6 mb-8">
                            <div className="lg:col-span-4 dashboard-panel h-[180px] overflow-hidden flex flex-col">
                                <div className="flex items-center gap-2 mb-2 pb-1 font-black text-white/50 text-xs uppercase border-b border-white/5"><Icon name="history" className="w-4 h-4 text-[#ffbae9]" /> 操作日誌</div>
                                <div className="flex-1 overflow-y-auto custom-scrollbar font-mono text-[13px] space-y-1">
                                    {activityLogs.map(log => <div key={log.id} className="border-b border-white/5 pb-0.5"><span className="text-white/30 text-[10px] mr-2">[{formatDate(log.timestamp).split(' ')[1]}]</span><span className="font-bold" style={{ color: nameColorMap[log.userName] }}>{log.userName}</span> {log.action} <span className="font-black">"{log.gameName}"</span></div>)}
                                </div>
                            </div>
                            <div className="lg:col-span-2 dashboard-panel h-[180px] flex flex-col gap-3">
                                <div className="flex justify-between items-center text-xs font-black text-white/50 uppercase"><span>在線</span><span className="text-xl font-black text-white">{onlineUsers.length}</span></div>
                                <div className="bg-black/20 p-2 flex-1 overflow-y-auto custom-scrollbar flex flex-wrap gap-2 rounded border border-white/5">
                                    {onlineUsers.map(u => <span key={u.uid} style={{ color: u.color }} className="font-black text-[11px]">● {u.name}</span>)}
                                </div>
                                <div className="flex justify-between items-center pt-1 border-t border-white/5">
                                    <div className="flex items-center gap-2 cursor-pointer" onClick={() => { const n = prompt("輸入名稱", userName); if(n) { setUserName(n); localStorage.setItem('steam_user_name', n); } }}>
                                        <span className="text-xs font-black" style={{ color: userColor }}>{userName}</span><Icon name="edit-3" className="w-3 h-3 opacity-30" />
                                    </div>
                                    <input type="color" className="w-6 h-6 bg-transparent cursor-pointer" value={userColor} onChange={e => { setUserColor(e.target.value); localStorage.setItem('steam_user_color', e.target.value); }} />
                                </div>
                            </div>
                            <div className="lg:col-span-4 dashboard-panel h-[180px] flex flex-col">
                                <div className="flex justify-between items-center mb-2 pb-1 font-black text-white/50 text-xs uppercase border-b border-white/5">成員統計</div>
                                <div className="flex-1 overflow-y-auto custom-scrollbar">
                                    <table className="w-full text-[11px] font-black text-left">
                                        <thead><tr className="opacity-40 uppercase"><th>成員</th><th className="text-center">總數</th><th className="text-center">觀看中</th><th className="text-center">已完成</th></tr></thead>
                                        <tbody>
                                            {memberStats.map(m => (
                                                <tr key={m.name} className="border-b border-white/5">
                                                    <td className="py-1" style={{ color: m.color }}>{m.name}</td>
                                                    <td className="text-center">{m.stats.total}</td>
                                                    <td className="text-center text-cyan-400">{m.stats.watching}</td>
                                                    <td className="text-center text-green-400">{m.stats.completed}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div className="flex flex-col md:flex-row items-center bg-black/20 border border-white/10 rounded-t-lg overflow-hidden shadow-xl">
                            <button onClick={() => { setEditingId(null); setFormData({ name: '', addedBy: userName, order: (games.length + 1).toString(), url: '', cover: null, totalEpisodes: { ...emptyProgress }, watchedProgress: { ...emptyProgress }, updatedEpisodes: { ...emptyProgress }, airingStatus: '連載中', source: '', category: '', sourceIcon: '', manualUpdatedAt: formatDate(new Date(), true), watchingBy: [], updateDay: '', updateTime: '18:00' }); setIsModalOpen(true); }} className="px-10 py-5 bg-[#ffbae9] text-[#3f5968] font-black uppercase tracking-widest text-sm border-l-8 border-white">+ 錄入新內容</button>
                            <div className="flex-grow flex items-center px-8 py-4"><Icon name="search" className="w-5 h-5 text-white/40 mr-4" /><input type="text" placeholder="搜尋標題或分類..." className="bg-transparent outline-none uppercase font-black text-sm flex-grow" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} /></div>
                            <div className="px-8"><button onClick={() => setIsEditLocked(!isEditLocked)} className={`px-6 py-2 rounded-full font-black text-xs border transition-all ${isEditLocked ? 'text-[#ffbae9] border-[#ffbae9]/50 bg-[#ffbae9]/10' : 'text-green-300 border-green-500/50 bg-green-500/10'}`}>{isEditLocked ? "唯讀模式" : "管理模式"}</button></div>
                        </div>

                        <article className="tab-content bg-black/10 border-x border-b border-white/10 p-6 rounded-b-lg shadow-2xl">
                            <nav className="tab-bar">
                                {customCategories.map((cat, idx) => <div key={idx} className={`tab ${activeTab === cat ? 'active' : ''}`} onClick={() => setActiveTab(prev => prev === cat ? null : cat)}>{cat}</div>)}
                                {!isEditLocked && (
                                    <div className="ml-auto flex gap-2">
                                        <div className="tab-action-btn" onClick={() => setIsAddGroupModalOpen(true)}><Icon name="plus" className="w-4 h-4" /></div>
                                        {activeTab && <div className="tab-action-btn" onClick={async () => { if(confirm(`刪除 ${activeTab}?`)) { const nc = customCategories.filter(c=>c!==activeTab); await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'settings', 'config'), { categories: nc }); setActiveTab(null); }}}><Icon name="minus" className="w-4 h-4" /></div>}
                                    </div>
                                )}
                            </nav> 
                            <div className="component-view">
                                <ul>
                                    {isLoadingGames ? <div className="py-20 text-center animate-pulse text-white/20 font-black uppercase">Synchronizing Data...</div> :
                                    filteredGames.length === 0 ? <div className="py-20 text-center text-white/10 font-black uppercase">No Entries Found</div> :
                                    filteredGames.map(g => (
                                        <GameCard key={g.id} g={g} nameColorMap={nameColorMap} allSources={customSources} isEditLocked={isEditLocked} 
                                            onOpenEdit={(item) => { 
                                                setEditingId(item.id); 
                                                const ensureP = (v) => (v && typeof v === 'object') ? { ...emptyProgress, ...v } : { ...emptyProgress, v1: v || '' };
                                                setFormData({ ...item, totalEpisodes: ensureP(item.totalEpisodes), watchedProgress: ensureP(item.watchedProgress), updatedEpisodes: ensureP(item.updatedEpisodes) }); 
                                                setIsModalOpen(true); 
                                            }}
                                            onDelete={(item) => setDeleteGameTarget(item)} 
                                        />
                                    ))}
                                </ul>
                            </div> 
                        </article>
                    </div>

                    {isAddGroupModalOpen && (
                        <div className="fixed inset-0 z-[300] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm">
                            <div className="bg-[#0b0e14] border border-white/20 p-6 rounded shadow-2xl w-full max-w-xs">
                                <h4 className="text-sm font-black mb-4 uppercase text-center">新增自定義分組</h4>
                                <input className="modal-input-base w-full mb-4" value={newGroupName} onChange={e=>setNewGroupName(e.target.value)} />
                                <div className="flex gap-2"><button onClick={()=>setIsAddGroupModalOpen(false)} className="flex-1 py-2 bg-white/5 text-[10px] font-black uppercase rounded">取消</button><button onClick={async()=>{ if(newGroupName.trim()){ await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'settings', 'config'), { categories: [...customCategories, newGroupName.trim()] }); setNewGroupName(''); setIsAddGroupModalOpen(false); }}} className="flex-1 py-2 bg-[#ffbae9] text-[#3f5968] text-[10px] font-black rounded uppercase">確定</button></div>
                            </div>
                        </div>
                    )}

                    {isModalOpen && (
                        <div className="fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm overflow-y-auto">
                            <div className="bg-[#0b0e14] border border-white/10 w-full max-w-3xl my-8 relative shadow-2xl rounded-sm">
                                <div className="absolute top-0 left-0 w-full h-1 bg-[#ffbae9]"></div>
                                <button onClick={() => setIsModalOpen(false)} className="absolute right-4 top-4 text-slate-600 hover:text-white transition-all"><Icon name="x" className="w-5 h-5" /></button>
                                <div className="p-8">
                                    <h3 className="text-2xl font-black italic mb-8 underline decoration-[#ffbae9]/30 uppercase tracking-tighter">{editingId ? 'Modify' : 'New Entry'} 資料卡</h3>
                                    <form onSubmit={handleSaveGame} className="space-y-6">
                                        <div className="grid grid-cols-1 md:grid-cols-12 gap-8">
                                            <div className="md:col-span-4 space-y-4">
                                                <div onClick={() => fileInputRef.current.click()} className="w-full aspect-[3/4.2] bg-black border border-white/10 rounded flex flex-col items-center justify-center cursor-pointer overflow-hidden group hover:border-[#ffbae9] transition-all">
                                                    {formData.cover ? <img src={formData.cover} className="w-full h-full object-cover" /> : <div className="text-center p-4 text-[10px] text-white/20 font-black uppercase leading-relaxed">點擊上傳封面</div>}
                                                </div>
                                                <input type="file" ref={fileInputRef} className="hidden" accept="image/*" onChange={async (e)=>{ if(e.target.files[0]) { const c = await compressImage(URL.createObjectURL(e.target.files[0])); setFormData({...formData, cover: c}); } }} />
                                                <div><label className="block text-[10px] font-black text-white/40 uppercase mb-1.5">排序編號</label><input type="text" className="modal-input-base w-full text-center font-black" value={formData.order} onChange={e=>setFormData({...formData, order: e.target.value})} /></div>
                                                <div><label className="block text-[10px] font-black text-white/40 uppercase mb-1.5">狀態</label><select className="modal-input-base w-full text-xs font-black" value={formData.airingStatus} onChange={e=>setFormData({...formData, airingStatus: e.target.value})}><option value="連載中">連載中</option><option value="已完結">已完結</option><option value="待播出">待播出</option></select></div>
                                            </div>
                                            <div className="md:col-span-8 space-y-2">
                                                <div><label className="block text-[11px] font-black text-[#ffbae9]/60 uppercase mb-2">名稱</label><input required className="modal-input-base w-full font-black text-white text-lg" value={formData.name} onChange={e=>setFormData({...formData, name: e.target.value})} /></div>
                                                <div className="grid grid-cols-2 gap-4">
                                                    <div><label className="block text-[11px] font-black text-white/40 uppercase mb-2">分類</label><select className="modal-input-base w-full text-sm font-bold" value={formData.category} onChange={e=>setFormData({...formData, category: e.target.value})}><option value="">- 分類 -</option>{customCategories.map(c => <option key={c} value={c}>{c}</option>)}</select></div>
                                                    <div><label className="block text-[11px] font-black text-white/40 uppercase mb-2">來源</label><input className="modal-input-base w-full text-sm font-bold" value={formData.source} onChange={e=>setFormData({...formData, source: e.target.value})} list="source-suggest" /><datalist id="source-suggest">{customSources.map(s => <option key={s.name} value={s.name} />)}</datalist></div>
                                                </div>
                                                <ProgressInputField label="總集數" value={formData.totalEpisodes} onChange={v=>setFormData({...formData, totalEpisodes: v})} />
                                                <ProgressInputField label="更新至" value={formData.updatedEpisodes} onChange={v=>setFormData({...formData, updatedEpisodes: v})} />
                                                <ProgressInputField label="觀看進度" labelClass="text-cyan-400" value={formData.watchedProgress} onChange={v=>setFormData({...formData, watchedProgress: v})} />
                                                <div className="grid grid-cols-2 gap-4">
                                                    <div><label className="block text-[11px] font-black text-white/40 mb-2">更新星期</label><select className="modal-input-base w-full text-xs" value={formData.updateDay} onChange={e=>setFormData({...formData, updateDay: e.target.value})}><option value="">- 無 -</option>{['一','二','三','四','五','六','日'].map(d => <option key={d} value={d}>每周 ({d})</option>)}</select></div>
                                                    <div><label className="block text-[11px] font-black text-white/40 mb-2">時間</label><input type="time" className="modal-input-base w-full text-xs" value={formData.updateTime} onChange={e=>setFormData({...formData, updateTime: e.target.value})} /></div>
                                                </div>
                                                <div><label className="block text-[11px] font-black text-white/40 mb-2">連結</label><input className="modal-input-base w-full font-mono text-[11px] text-cyan-500" value={formData.url} onChange={e=>setFormData({...formData, url: e.target.value})} /></div>
                                                <div className="flex flex-wrap gap-2 pt-2">
                                                    {allMemberIDs.map(n => <div key={n} className={`watcher-tag ${formData.watchingBy.includes(n) ? 'active' : ''}`} onClick={()=>{ const nl = formData.watchingBy.includes(n) ? formData.watchingBy.filter(x=>x!==n) : [...formData.watchingBy, n]; setFormData({...formData, watchingBy: nl}); }}>{n}</div>)}
                                                </div>
                                            </div>
                                        </div>
                                        <div className="pt-6 flex gap-4"><button type="button" onClick={()=>setIsModalOpen(false)} className="flex-1 py-4 bg-white/5 text-[12px] font-black rounded uppercase hover:bg-white/10 transition-colors border border-white/5">取消修改</button><button type="submit" className="flex-[2] py-4 bg-[#ffbae9] text-[#3f5968] text-[12px] font-black rounded shadow-lg uppercase active:scale-95 transition-all">確認提交資料</button></div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    )}

                    {deleteGameTarget && (
                        <div className="fixed inset-0 z-[700] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md">
                            <div className="bg-[#0b0e14] border border-red-500/50 w-full max-w-sm p-10 rounded-sm text-center shadow-2xl">
                                <Icon name="alert-triangle" className="w-12 h-12 text-red-500 mx-auto mb-4" /><h4 className="text-red-500 font-black mb-2 uppercase text-lg">確認刪除？</h4><p className="text-sm text-slate-300 mb-8 font-bold italic">{deleteGameTarget.name}</p>
                                <div className="flex gap-4"><button onClick={()=>setDeleteGameTarget(null)} className="flex-1 py-3 bg-white/5 text-[12px] font-black rounded border border-white/5 uppercase">取消</button><button onClick={async()=>{ await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'games', deleteGameTarget.id)); setDeleteGameTarget(null); showNotify("資料已從矩陣移除"); }} className="flex-1 py-3 bg-red-600 text-white text-[12px] font-black rounded uppercase">確定移除</button></div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
